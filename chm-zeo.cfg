[buildout]
extends =
    chm.cfg
parts =
    zope-instance0
    zope-instance1
    zope-instance2
    zope-instance3
    zope-instance-dev
    zeo-server
    poundbuild
    poundconfig
newest = false

[poundbuild]
recipe = plone.recipe.pound:build
url = http://eggshop.eaudeweb.ro/pound-2.5-maxbuf.tar.gz

[poundconfig]
recipe = plone.recipe.pound:config
socket = ${buildout:directory}/var/poundctl.socket
balancers =
  one 127.0.0.1:23081 127.0.0.1:8090 127.0.0.1:8091 127.0.0.1:8092
timeout = 60
grace = 10

[zeo-server]
recipe = plone.recipe.zope2zeoserver
zope2-location = ${zope-server:location}
zeo-address =  ${buildout:directory}/var/zeoserver.sock
effective-user = zope
file-storage = ${buildout:directory}/../var/filestorage/Data.fs
blob-storage = ${buildout:directory}/../var/blobstorage
eggs = plone.app.blob
zeo-conf-additional =
     %import tempstorage
     <temporarystorage temp>
         name temporary storage for sessioning
     </temporarystorage>

[zope-instance0]
http-address = 8090

recipe = plone.recipe.zope2instance
zope2-location = ${zope-server:location}
zserver-threads = 2
effective-user = zope
user = admin:admin
zeo-client = true
zeo-address = ${zeo-server:zeo-address}
zodb-cache-size = 5000
zeo-client-cache-size = 128MB
eggs = ${zope-instance:eggs}
zcml = ${zope-instance:zcml}
products = ${zope-instance:products}
environment-vars = ${zope-instance:environment-vars}
blob-storage = ${zeo-server:blob-storage}
zodb-temporary-storage =
     <zodb_db temporary>
         mount-point /temp_folder
         cache-size 10000
         <zeoclient>
           server ${zeo-server:zeo-address}
           storage temp
           name zeo-temp-storage
           cache-size 100MB
         </zeoclient>
     </zodb_db>
zope-conf-additional =
     maximum-number-of-session-objects 10000


[zope-instance1]
http-address = 8091

recipe = plone.recipe.zope2instance
zope2-location = ${zope-server:location}
zserver-threads = 2
effective-user = zope
user = admin:admin
zeo-client = true
zeo-address = ${zeo-server:zeo-address}
zodb-cache-size = 5000
zeo-client-cache-size = 128MB
eggs = ${zope-instance:eggs}
zcml = ${zope-instance:zcml}
products = ${zope-instance:products}
environment-vars = ${zope-instance:environment-vars}
blob-storage = ${zeo-server:blob-storage}
zodb-temporary-storage = ${zope-instance0:zodb-temporary-storage}
zope-conf-additional = ${zope-instance0:zope-conf-additional}

[zope-instance2]
http-address = 8092

recipe = plone.recipe.zope2instance
zope2-location = ${zope-server:location}
zserver-threads = ${zope-instance1:zserver-threads}
effective-user = ${zope-instance1:effective-user}
user = ${zope-instance1:user}
eggs = ${zope-instance1:eggs}
products = ${zope-instance1:products}
zcml = ${zope-instance1:zcml}
zeo-client = true
zeo-address = ${zeo-server:zeo-address}
zodb-cache-size = ${zope-instance1:zodb-cache-size}
zeo-client-cache-size = ${zope-instance1:zeo-client-cache-size}
environment-vars = ${zope-instance1:environment-vars}
blob-storage = ${zeo-server:blob-storage}
zodb-temporary-storage = ${zope-instance0:zodb-temporary-storage}
zope-conf-additional = ${zope-instance0:zope-conf-additional}

[zope-instance3]
http-address = 8093

recipe = plone.recipe.zope2instance
zope2-location = ${zope-server:location}
zserver-threads = ${zope-instance1:zserver-threads}
effective-user = ${zope-instance1:effective-user}
user = ${zope-instance1:user}
eggs = ${zope-instance1:eggs}
products = ${zope-instance1:products}
zcml = ${zope-instance1:zcml}
zeo-client = true
zeo-address = ${zeo-server:zeo-address}
zodb-cache-size = ${zope-instance1:zodb-cache-size}
zeo-client-cache-size = ${zope-instance1:zeo-client-cache-size}
environment-vars = ${zope-instance1:environment-vars}
blob-storage = ${zeo-server:blob-storage}
zodb-temporary-storage = ${zope-instance0:zodb-temporary-storage}
zope-conf-additional = ${zope-instance0:zope-conf-additional}

[zope-instance-dev]
http-address = 8099

recipe = plone.recipe.zope2instance
zope2-location = ${zope-server:location}
zserver-threads = ${zope-instance1:zserver-threads}
effective-user = ${zope-instance1:effective-user}
user = ${zope-instance1:user}
eggs = ${zope-instance1:eggs}
products = ${zope-instance1:products}
zcml = ${zope-instance1:zcml}
zeo-client = true
zeo-address = ${zeo-server:zeo-address}
zodb-cache-size = ${zope-instance1:zodb-cache-size}
zeo-client-cache-size = ${zope-instance1:zeo-client-cache-size}
environment-vars = ${zope-instance1:environment-vars}
blob-storage = ${zeo-server:blob-storage}
zodb-temporary-storage = ${zope-instance0:zodb-temporary-storage}
zope-conf-additional = ${zope-instance0:zope-conf-additional}
